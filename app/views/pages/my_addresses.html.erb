<% content_for(:page_header, 'Meus Endereços') %>
<div class="container addresses-container">
  <div class="row d-flex justify-content-between mb-3">
    <div class="col">
      <span>Meus endereços</span>
    </div>
    <div class="col text-end">
      <%= link_to '#', data: { 'bs-toggle': 'offcanvas', 'bs-target': '#newAddressCanvas' } do %>
        <i class="fas fa-plus"></i> Novo endereço
      <% end %>
    </div>
  </div>

  <% @addresses.each do |address| %>
    <div class="address-card">
      <input type="checkbox" id="menu-toggle<%= address.id %>">
      <label for="menu-toggle<%= address.id %>">
        <i class="fas fa-ellipsis-h"></i>
      </label>
      <div class="address-card-menu d-flex flex-column justify-content-around">
        <%= link_to '#', data: { 'bs-toggle': 'offcanvas', 'bs-target': "#editAddress#{address.id}Canvas" } do %>
          <i class="fas fa-pencil-alt"></i>
        <% end %>
        <%= link_to address_path(address), class: 'me-2', method: :delete, data: { confirm: 'Tem certeza?', turbo: true } do %>
          <i class="far fa-trash-alt"></i>
        <% end %>
        <%= render 'addresses/edit', address: address %>
      </div>

      <div class="address-card-content">
        <h2><%= address.name %></h2>
        <span><%= ' (principal)' if address.main %></span>
        <p><%= "#{address.street}, #{address.number}#{" / " + address.complements if address.complements.present?}" %></p>
        <p><%= "#{address.cep} - #{address.city}, #{address.state}" %></p>
      </div>
    </div>
  <% end %>
  <div class="container offcanvas offcanvas-end" id="newAddressCanvas" tabindex="-1" aria-labelledby="sessionHeaders" aria-hidden="true">
    <div class="pt-5 ms-auto">
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <%= render 'addresses/form', address: @address %>
  </div>
</div>
